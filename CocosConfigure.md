# ğŸ›ï¸ Cocos Creator ä¸­é…ç½®éšæœºåœ°å›¾ç”Ÿæˆç³»ç»Ÿ

## ğŸ“‹ é…ç½®æ­¥éª¤è¯¦è§£

### ç¬¬ä¸€æ­¥ï¼šæ‰“å¼€åœºæ™¯
1. åœ¨ Cocos Creator ä¸­æ‰“å¼€ `assets/scenes/Main.scene`
2. ç¡®ä¿åœºæ™¯å±‚æ¬¡é¢æ¿å¯è§

### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºèŠ‚ç‚¹ç»“æ„

åœ¨ **å±‚æ¬¡ç®¡ç†å™¨** ä¸­åˆ›å»ºä»¥ä¸‹èŠ‚ç‚¹ç»“æ„ï¼š

```
Main Camera
Canvas
â”œâ”€â”€ GameRoot (Node) 
    â”œâ”€â”€ MapRoot (Node)
    â”œâ”€â”€ Player (Node) 
    â””â”€â”€ UI (Node)
```

**åˆ›å»ºæ–¹æ³•ï¼š**
1. å³é”®ç‚¹å‡» `Canvas` â†’ `åˆ›å»º` â†’ `åˆ›å»ºç©ºèŠ‚ç‚¹`
2. é‡å‘½åä¸º `GameRoot`
3. å³é”®ç‚¹å‡» `GameRoot` â†’ `åˆ›å»º` â†’ `åˆ›å»ºç©ºèŠ‚ç‚¹`
4. åˆ†åˆ«é‡å‘½åä¸º `MapRoot`ã€`Player`ã€`UI`

### ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ ç»„ä»¶åˆ° GameRoot

é€‰ä¸­ `GameRoot` èŠ‚ç‚¹ï¼Œåœ¨ **å±æ€§æ£€æŸ¥å™¨** ä¸­ï¼š

1. **ç‚¹å‡» "æ·»åŠ ç»„ä»¶" æŒ‰é’®**
2. **æœç´¢å¹¶æ·»åŠ ä»¥ä¸‹ç»„ä»¶ï¼š**
   - `MapGenerator`
   - `TileMapRenderer` 
   - `GameManager`

### ç¬¬å››æ­¥ï¼šé…ç½® MapGenerator å‚æ•°

é€‰ä¸­ `GameRoot` èŠ‚ç‚¹ï¼Œåœ¨ **å±æ€§æ£€æŸ¥å™¨** ä¸­æ‰¾åˆ° `MapGenerator` ç»„ä»¶ï¼š

#### ğŸ—ºï¸ MapGenerator å‚æ•°é…ç½®

| å‚æ•°åç§° | æ¨èå€¼ | è¯´æ˜ |
|---------|-------|------|
| **Map Root** | æ‹–æ‹½ `MapRoot` èŠ‚ç‚¹ | åœ°å›¾å®¹å™¨èŠ‚ç‚¹ |
| **Map Width** | `50` | åœ°å›¾å®½åº¦ï¼ˆæ ¼å­æ•°ï¼‰ |
| **Map Height** | `50` | åœ°å›¾é«˜åº¦ï¼ˆæ ¼å­æ•°ï¼‰ |
| **Min Rooms** | `8` | æœ€å°‘æˆ¿é—´æ•°é‡ |
| **Max Rooms** | `15` | æœ€å¤šæˆ¿é—´æ•°é‡ |
| **Min Room Size** | `5` | æœ€å°æˆ¿é—´å°ºå¯¸ |
| **Max Room Size** | `12` | æœ€å¤§æˆ¿é—´å°ºå¯¸ |
| **Cell Size** | `32` | æ¯ä¸ªç“¦ç‰‡çš„åƒç´ å¤§å° |

**è®¾ç½®æ–¹æ³•ï¼š**
1. ç‚¹å‡»æ•°å€¼æ¡†ç›´æ¥è¾“å…¥æ•°å­—
2. å¯¹äº `Map Root`ï¼šä»å±‚æ¬¡ç®¡ç†å™¨æ‹–æ‹½ `MapRoot` èŠ‚ç‚¹åˆ°æ­¤å­—æ®µ

### ç¬¬äº”æ­¥ï¼šé…ç½® TileMapRenderer å‚æ•°

åœ¨åŒä¸€ä¸ª `GameRoot` èŠ‚ç‚¹çš„ `TileMapRenderer` ç»„ä»¶ä¸­ï¼š

#### ğŸ¨ TileMapRenderer å‚æ•°é…ç½®

| å‚æ•°åç§° | è®¾ç½®æ–¹æ³• |
|---------|----------|
| **Map Generator** | é€‰æ‹©åŒèŠ‚ç‚¹çš„ `MapGenerator` ç»„ä»¶ |
| **Tile Container** | æ‹–æ‹½ `MapRoot` èŠ‚ç‚¹ |
| **Floor Tile Prefab** | (å¯é€‰) æ‹–æ‹½åœ°æ¿é¢„åˆ¶ä½“ |
| **Wall Tile Prefab** | (å¯é€‰) æ‹–æ‹½å¢™å£é¢„åˆ¶ä½“ |
| **Corridor Tile Prefab** | (å¯é€‰) æ‹–æ‹½èµ°å»Šé¢„åˆ¶ä½“ |
| **Door Tile Prefab** | (å¯é€‰) æ‹–æ‹½é—¨é¢„åˆ¶ä½“ |
| **Spawn Point Prefab** | (å¯é€‰) æ‹–æ‹½å‡ºç”Ÿç‚¹é¢„åˆ¶ä½“ |
| **Treasure Chest Prefab** | (å¯é€‰) æ‹–æ‹½å®ç®±é¢„åˆ¶ä½“ |
| **Normal Enemy Prefab** | (å¯é€‰) æ‹–æ‹½æ™®é€šæ•Œäººé¢„åˆ¶ä½“ |
| **Boss Enemy Prefab** | (å¯é€‰) æ‹–æ‹½Bossé¢„åˆ¶ä½“ |

**æ³¨æ„ï¼š** é¢„åˆ¶ä½“éƒ½æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä¸è®¾ç½®ä¼šä½¿ç”¨å½©è‰²æ–¹å—ä½œä¸ºè°ƒè¯•æ˜¾ç¤ºã€‚

### ç¬¬å…­æ­¥ï¼šé…ç½® GameManager å‚æ•°

åœ¨åŒä¸€ä¸ª `GameRoot` èŠ‚ç‚¹çš„ `GameManager` ç»„ä»¶ä¸­ï¼š

#### ğŸ® GameManager å‚æ•°é…ç½®

| å‚æ•°åç§° | è®¾ç½®æ–¹æ³• |
|---------|----------|
| **Map Generator** | é€‰æ‹©åŒèŠ‚ç‚¹çš„ `MapGenerator` ç»„ä»¶ |
| **Map Renderer** | é€‰æ‹©åŒèŠ‚ç‚¹çš„ `TileMapRenderer` ç»„ä»¶ |
| **Player** | æ‹–æ‹½ `Player` èŠ‚ç‚¹ |
| **Camera Node** | æ‹–æ‹½ `Main Camera` èŠ‚ç‚¹ |
| **Player Speed** | è¾“å…¥ `200` |

### ç¬¬ä¸ƒæ­¥ï¼šé…ç½®ç©å®¶èŠ‚ç‚¹

é€‰ä¸­ `Player` èŠ‚ç‚¹ï¼š

1. **æ·»åŠ  Sprite ç»„ä»¶**ï¼š
   - ç‚¹å‡» "æ·»åŠ ç»„ä»¶" â†’ `æ¸²æŸ“ç»„ä»¶` â†’ `Sprite`
   - æš‚æ—¶å¯ä»¥ä¸è®¾ç½® SpriteFrameï¼Œä¼šæ˜¾ç¤ºä¸ºç™½è‰²æ–¹å—

2. **è®¾ç½®ç©å®¶å¤§å°**ï¼š
   - åœ¨ `Transform` ç»„ä»¶ä¸­è®¾ç½® Scale ä¸º `(0.8, 0.8, 1)`

### ç¬¬å…«æ­¥ï¼šè°ƒæ•´æ‘„åƒæœº

é€‰ä¸­ `Main Camera` èŠ‚ç‚¹ï¼š

1. **è®¾ç½®ä½ç½®**ï¼š
   - Position Z è®¾ç½®ä¸º `1000`
   - Position X å’Œ Y ä¿æŒ `0`

2. **è°ƒæ•´æ‘„åƒæœºè®¾ç½®** (å¯é€‰)ï¼š
   - åœ¨ `Camera` ç»„ä»¶ä¸­è°ƒæ•´ `Ortho Height` æ¥æ§åˆ¶è§†é‡å¤§å°

## ğŸ¯ å®Œæ•´é…ç½®å›¾ç¤º

### èŠ‚ç‚¹å±‚æ¬¡ç»“æ„
```
ğŸ“ Main
â”œâ”€â”€ ğŸ“· Main Camera (Cameraç»„ä»¶)
â””â”€â”€ ğŸ“„ Canvas 
    â””â”€â”€ ğŸ“¦ GameRoot 
        â”œâ”€â”€ ğŸ”§ MapGenerator ç»„ä»¶
        â”œâ”€â”€ ğŸ¨ TileMapRenderer ç»„ä»¶  
        â”œâ”€â”€ ğŸ® GameManager ç»„ä»¶
        â”œâ”€â”€ ğŸ—ºï¸ MapRoot (ç©ºèŠ‚ç‚¹)
        â”œâ”€â”€ ğŸ‘¤ Player (Spriteç»„ä»¶)
        â””â”€â”€ ğŸ–¼ï¸ UI (ç©ºèŠ‚ç‚¹)
```

### ç»„ä»¶å¼•ç”¨å…³ç³»
```
GameManager å¼•ç”¨ï¼š
â”œâ”€â”€ MapGenerator (åŒèŠ‚ç‚¹)
â”œâ”€â”€ TileMapRenderer (åŒèŠ‚ç‚¹)  
â”œâ”€â”€ Player (PlayerèŠ‚ç‚¹)
â””â”€â”€ Camera (Main CameraèŠ‚ç‚¹)

TileMapRenderer å¼•ç”¨ï¼š
â”œâ”€â”€ MapGenerator (åŒèŠ‚ç‚¹)
â””â”€â”€ TileContainer (MapRootèŠ‚ç‚¹)

MapGenerator å¼•ç”¨ï¼š
â””â”€â”€ MapRoot (MapRootèŠ‚ç‚¹)
```

## ğŸ”§ å‚æ•°è°ƒæ•´å»ºè®®

### ğŸ—ºï¸ åœ°å›¾å¤§å°è°ƒæ•´
- **å°åœ°å›¾**ï¼š`mapWidth: 30, mapHeight: 30, maxRooms: 8`
- **ä¸­ç­‰åœ°å›¾**ï¼š`mapWidth: 50, mapHeight: 50, maxRooms: 15` (æ¨è)
- **å¤§åœ°å›¾**ï¼š`mapWidth: 80, mapHeight: 80, maxRooms: 25`

### ğŸ  æˆ¿é—´å¯†åº¦è°ƒæ•´
- **ç¨€ç–å¸ƒå±€**ï¼š`minRooms: 5, maxRooms: 8`
- **æ­£å¸¸å¸ƒå±€**ï¼š`minRooms: 8, maxRooms: 15` (æ¨è)
- **å¯†é›†å¸ƒå±€**ï¼š`minRooms: 15, maxRooms: 25`

### ğŸ“ æˆ¿é—´å¤§å°è°ƒæ•´
- **å°æˆ¿é—´**ï¼š`minRoomSize: 3, maxRoomSize: 8`
- **ä¸­ç­‰æˆ¿é—´**ï¼š`minRoomSize: 5, maxRoomSize: 12` (æ¨è)
- **å¤§æˆ¿é—´**ï¼š`minRoomSize: 8, maxRoomSize: 20`

## ğŸš€ æµ‹è¯•è¿è¡Œ

é…ç½®å®Œæˆåï¼š

1. **ä¿å­˜åœºæ™¯**ï¼š`Ctrl+S`
2. **ç‚¹å‡»æ’­æ”¾æŒ‰é’®** æˆ–æŒ‰ `Ctrl+P`
3. **æµ‹è¯•åŠŸèƒ½**ï¼š
   - çœ‹åˆ°å½©è‰²æ–¹å—ç»„æˆçš„åœ°å›¾
   - æŒ‰ `R` é”®é‡æ–°ç”Ÿæˆåœ°å›¾  
   - ç”¨ `WASD` ç§»åŠ¨ç™½è‰²æ–¹å—ï¼ˆç©å®¶ï¼‰
   - æŒ‰ `ç©ºæ ¼` æš‚åœæ¸¸æˆ

## â— å¸¸è§é—®é¢˜

### Q: æ‰¾ä¸åˆ°ç»„ä»¶
**A:** ç¡®ä¿è„šæœ¬æ–‡ä»¶åœ¨æ­£ç¡®ä½ç½®ï¼š`assets/scripts/managers/`

### Q: æ— æ³•æ‹–æ‹½èŠ‚ç‚¹åˆ°å‚æ•°
**A:** ç¡®ä¿ç›®æ ‡èŠ‚ç‚¹ç±»å‹æ­£ç¡®ï¼Œå¿…è¦æ—¶å¯ä»¥ç‚¹å‡»å‚æ•°å³è¾¹çš„åœ†å½¢å›¾æ ‡é€‰æ‹©

### Q: æ¸¸æˆè¿è¡Œæ—¶æŠ¥é”™
**A:** æ£€æŸ¥æ‰€æœ‰å¿…å¡«å‚æ•°æ˜¯å¦éƒ½å·²è®¾ç½®ï¼Œç‰¹åˆ«æ˜¯èŠ‚ç‚¹å¼•ç”¨

### Q: çœ‹ä¸åˆ°åœ°å›¾
**A:** æ£€æŸ¥æ‘„åƒæœº Z åæ ‡æ˜¯å¦è®¾ç½®ä¸º 1000ï¼ŒMapRoot æ˜¯å¦æ­£ç¡®è®¾ç½®

---

å®Œæˆè¿™äº›é…ç½®åï¼Œä½ å°±å¯ä»¥åœ¨ Cocos Creator ä¸­ä½“éªŒéšæœºåœ°å›¾ç”Ÿæˆç³»ç»Ÿäº†ï¼ğŸ®âœ¨
