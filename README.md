# 🎮 抓鬼游戏 (ZhuaGui)

一个基于 Cocos Creator 开发的 Roguelike 风格 2D 游戏，具有随机地图生成和程序化内容放置功能。

## ✨ 功能特性

### 🗺️ 随机地图生成系统
- **房间-走廊结构**: 参考鸠摩智转刀2的设计理念
- **最小生成树连接**: 确保所有房间可达
- **程序化内容放置**: 自动生成敌人、宝箱、出生点

### 🎮 游戏控制
- **WASD/方向键移动**: 流畅的角色控制
- **R键重新生成地图**: 随时获得新的冒险体验
- **空格键暂停/恢复**: 游戏状态控制
- **碰撞检测**: 物理交互系统

### 🎨 视觉系统
- **可识别图标**: 程序化生成的清晰游戏对象图标
  - 👹 敌人：红色圆形 + X标记
  - 💰 宝箱：金色方形 + $符号  
  - 🏠 出生点：绿色圆形 + 房子图标
  - 🧑 玩家：蓝色圆形 + 人形图标
- **摄像机跟随**: 平滑的视角跟踪

## 🛠️ 技术栈

- **引擎**: Cocos Creator 3.8.7
- **语言**: TypeScript
- **架构**: 组件化设计
- **图标**: 程序化Canvas生成 + 备用方案

## 🏗️ 核心架构

### 主要组件
- **MapGenerator**: 地图生成算法核心
- **TileMapRenderer**: 瓦片渲染和对象池管理
- **GameManager**: 游戏状态管理和输入处理
- **TextureGenerator**: 程序化图标生成工具

### 设计模式
- **对象池模式**: 优化瓦片渲染性能
- **策略模式**: 多种地图生成算法
- **观察者模式**: 游戏事件系统

## 🚀 如何运行

1. 确保安装 Cocos Creator 3.8.7
2. 在 Cocos Creator 中打开项目
3. 点击播放按钮开始游戏
4. 使用 WASD 移动，R键重新生成地图

## 🎯 游戏玩法

1. **探索地图**: 在随机生成的房间中自由移动
2. **收集宝箱**: 寻找并获取散布在地图中的宝藏
3. **避开敌人**: 小心红色的敌人标记
4. **重新冒险**: 按R键生成全新的地图布局

## 📁 项目结构

```
assets/
├── scenes/
│   └── Main.scene           # 主游戏场景
├── scripts/
│   ├── managers/            # 核心管理器
│   │   ├── MapGenerator.ts     # 地图生成算法
│   │   ├── TileMapRenderer.ts  # 渲染系统  
│   │   └── GameManager.ts      # 游戏管理
│   └── utils/               # 工具类
│       ├── TextureGenerator.ts # 图标生成
│       └── SpriteUtils.ts      # 精灵工具
└── textures/
    └── white.png            # 基础白色纹理
```

## 🎨 特色功能

### 随机地图生成
- 每次运行都是独特的冒险体验
- 房间数量和布局完全随机
- 智能的走廊连接算法

### 程序化内容
- 敌人和宝箱的位置随机分布
- 基于房间大小的智能放置策略
- 确保游戏平衡性的内容密度控制

## 🔧 开发者说明

### 扩展指南
- 添加新的房间类型：修改 `MapGenerator.ts` 中的房间生成逻辑
- 创建新的游戏对象：在 `TextureGenerator.ts` 中添加新的图标生成方法
- 调整地图参数：在 `MapGenerator` 组件的属性面板中配置

### 性能优化
- 使用对象池减少GC压力
- 程序化纹理生成避免大量美术资源
- 智能的渲染剔除和LOD系统

## 🎉 更新日志

### v1.0.0 (当前版本)
- ✅ 完整的随机地图生成系统
- ✅ 玩家控制和移动
- ✅ 程序化图标生成
- ✅ 摄像机跟随系统
- ✅ 游戏状态管理

### 计划功能
- 🔄 敌人AI和战斗系统
- 🔄 道具和装备系统
- 🔄 关卡进度和存档
- 🔄 音效和背景音乐

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！项目采用模块化设计，易于扩展和维护。

---

**享受你的随机冒险之旅！** 🚀✨